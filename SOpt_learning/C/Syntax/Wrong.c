while scanf("%s", buf) != EOF // Falta parênteses aqui.

for (p = bin[h]; p != NULL; p = p->next) //p não está declarado em lugar algum.

return // Daqui pra frente nada será executado.

p = malloc(sizeof(hashnode))
    
//https://pt.stackoverflow.com/q/178341/101
